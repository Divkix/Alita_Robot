---
phase: 07-tech-debt-sentinel-guard-and-metadata-backfill
plan: 02
type: execute
wave: 2
depends_on: [07-01]
files_modified:
  - .planning/phases/01/01-01-SUMMARY.md
  - .planning/phases/01/01-02-SUMMARY.md
  - .planning/phases/01/01-03-SUMMARY.md
  - .planning/phases/03-locale-and-i18n-fixes/03-01-SUMMARY.md
  - .planning/phases/03-locale-and-i18n-fixes/03-02-SUMMARY.md
  - .planning/phases/04-operator-documentation/04-01-SUMMARY.md
  - .planning/phases/04-operator-documentation/04-02-SUMMARY.md
  - .planning/phases/04-operator-documentation/04-03-SUMMARY.md
  - .planning/phases/05-readme-and-final-verification/05-01-SUMMARY.md
  - .planning/phases/05-readme-and-final-verification/05-02-SUMMARY.md
  - .planning/phases/05-readme-and-final-verification/05-03-SUMMARY.md
  - .planning/phases/06-gap-closure-restore-api-reference-and-housekeeping/06-01-SUMMARY.md
  - .planning/phases/06-gap-closure-restore-api-reference-and-housekeeping/06-02-SUMMARY.md
  - .planning/STATE.md
  - .planning/ROADMAP.md
  - .planning/phases/07-tech-debt-sentinel-guard-and-metadata-backfill/07-VALIDATION.md
autonomous: true
requirements: []

must_haves:
  truths:
    - "All 16 SUMMARY files use requirements_completed (underscore) not requirements-completed (hyphen)"
    - "No SUMMARY file has requirements-completed (hyphen) in its YAML frontmatter"
    - "STATE.md reflects Phase 7 completion"
    - "ROADMAP.md Phase 7 row shows complete"
    - "07-VALIDATION.md has nyquist_compliant: true"
  artifacts:
    - path: ".planning/phases/01/01-01-SUMMARY.md"
      provides: "Phase 1 plan 1 summary with canonical field name"
      contains: "requirements_completed:"
    - path: ".planning/phases/06-gap-closure-restore-api-reference-and-housekeeping/06-02-SUMMARY.md"
      provides: "Phase 6 plan 2 summary with canonical field name"
      contains: "requirements_completed:"
  key_links:
    - from: ".planning/phases/*/SUMMARY.md"
      to: ".planning/REQUIREMENTS.md"
      via: "requirements_completed field values reference requirement IDs"
      pattern: "requirements_completed:.*\\[.*-\\d+.*\\]"
---

<objective>
Rename `requirements-completed` to `requirements_completed` in 13 SUMMARY files, update milestone tracking metadata, and run final verification.

Purpose: The canonical form established in Phase 2 uses underscore (`requirements_completed`). 13 SUMMARY files from phases 1, 3, 4, 5, and 6 use hyphen (`requirements-completed`). This inconsistency breaks automated 3-source requirements cross-referencing. The rename is mechanical — only the YAML key name changes, all values (requirement ID lists) stay identical.

Output: 13 renamed SUMMARY fields, updated STATE.md and ROADMAP.md, validated 07-VALIDATION.md sign-off.
</objective>

<execution_context>
@/Users/divkix/.claude/get-shit-done/workflows/execute-plan.md
@/Users/divkix/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-tech-debt-sentinel-guard-and-metadata-backfill/07-RESEARCH.md
@.planning/phases/07-tech-debt-sentinel-guard-and-metadata-backfill/07-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rename requirements-completed to requirements_completed in 13 SUMMARY files</name>
  <files>
    .planning/phases/01/01-01-SUMMARY.md,
    .planning/phases/01/01-02-SUMMARY.md,
    .planning/phases/01/01-03-SUMMARY.md,
    .planning/phases/03-locale-and-i18n-fixes/03-01-SUMMARY.md,
    .planning/phases/03-locale-and-i18n-fixes/03-02-SUMMARY.md,
    .planning/phases/04-operator-documentation/04-01-SUMMARY.md,
    .planning/phases/04-operator-documentation/04-02-SUMMARY.md,
    .planning/phases/04-operator-documentation/04-03-SUMMARY.md,
    .planning/phases/05-readme-and-final-verification/05-01-SUMMARY.md,
    .planning/phases/05-readme-and-final-verification/05-02-SUMMARY.md,
    .planning/phases/05-readme-and-final-verification/05-03-SUMMARY.md,
    .planning/phases/06-gap-closure-restore-api-reference-and-housekeeping/06-01-SUMMARY.md,
    .planning/phases/06-gap-closure-restore-api-reference-and-housekeeping/06-02-SUMMARY.md
  </files>
  <action>
For each of the 13 SUMMARY files listed below, replace the YAML frontmatter key `requirements-completed:` with `requirements_completed:`. The values (requirement ID lists in brackets) remain unchanged.

**All 13 files and their values (values do NOT change — only the key name):**

| File | Value (keep as-is) |
|------|---------------------|
| `.planning/phases/01/01-01-SUMMARY.md` | `[TOOL-01]` |
| `.planning/phases/01/01-02-SUMMARY.md` | `[TOOL-02, TOOL-04]` |
| `.planning/phases/01/01-03-SUMMARY.md` | `[TOOL-03, TOOL-05]` |
| `.planning/phases/03-locale-and-i18n-fixes/03-01-SUMMARY.md` | `[I18N-01, I18N-03, I18N-06]` |
| `.planning/phases/03-locale-and-i18n-fixes/03-02-SUMMARY.md` | `[I18N-02, I18N-04, I18N-05, I18N-06]` |
| `.planning/phases/04-operator-documentation/04-01-SUMMARY.md` | `[OPER-01]` |
| `.planning/phases/04-operator-documentation/04-02-SUMMARY.md` | `[OPER-02]` |
| `.planning/phases/04-operator-documentation/04-03-SUMMARY.md` | `[OPER-03]` |
| `.planning/phases/05-readme-and-final-verification/05-01-SUMMARY.md` | `[VRFY-04]` |
| `.planning/phases/05-readme-and-final-verification/05-02-SUMMARY.md` | `[VRFY-01, VRFY-02]` |
| `.planning/phases/05-readme-and-final-verification/05-03-SUMMARY.md` | `[VRFY-03, VRFY-04]` |
| `.planning/phases/06-gap-closure-restore-api-reference-and-housekeeping/06-01-SUMMARY.md` | `[DOCS-02, DOCS-03, DOCS-04, DOCS-05, DOCS-07]` |
| `.planning/phases/06-gap-closure-restore-api-reference-and-housekeeping/06-02-SUMMARY.md` | `[DOCS-02, DOCS-03, DOCS-04, DOCS-05, DOCS-07]` |

Use the Edit tool for each file. The replacement is:
- `old_string`: `requirements-completed:` (with whatever value follows on that line)
- `new_string`: `requirements_completed:` (with the same value)

**Verification after edits:**

```bash
# Confirm NO hyphen variants remain
grep -r "^requirements-completed:" .planning/phases/
# Expected: NO output

# Confirm ALL 16 SUMMARY files now use underscore
grep -r "^requirements_completed:" .planning/phases/*SUMMARY* | wc -l
# Expected: 16 (13 just renamed + 3 already correct from Phase 2)
```

**CRITICAL:** Do NOT change the values (requirement ID lists). Only the key name changes from hyphen to underscore.
  </action>
  <verify>
    <automated>grep -r "^requirements-completed:" .planning/phases/ && echo "FAIL: hyphen still present" || echo "PASS: all renamed"</automated>
  </verify>
  <done>All 13 SUMMARY files renamed from `requirements-completed` to `requirements_completed`. Zero instances of hyphen variant remain. Total of 16 SUMMARY files use consistent underscore form.</done>
</task>

<task type="auto">
  <name>Task 2: Update milestone tracking metadata and final verification</name>
  <files>
    .planning/STATE.md,
    .planning/ROADMAP.md,
    .planning/phases/07-tech-debt-sentinel-guard-and-metadata-backfill/07-VALIDATION.md
  </files>
  <action>
**Step 1: Update STATE.md**

Update the following fields in `.planning/STATE.md`:
- `total_phases: 7` (was 6)
- `completed_phases: 7` (was 6)
- `total_plans: 18` (was 16 — add 2 for Phase 7)
- `completed_plans: 18` (was 16)
- `status: complete` (was unknown)
- Update `Current Position` section to reflect Phase 7 complete
- Update `Last activity` line to include Phase 7 completion date
- Update `Stopped at` to reflect all 7 phases complete
- Add Phase 7 row to the By Phase performance metrics table: `| 7 | 2 | ~X min | ~X min |` (estimate based on actual execution)
- Update Pending Todos: None
- Update Blockers/Concerns: None

**Step 2: Update ROADMAP.md**

Update the Phase 7 progress row in the table at the bottom:
```
| 7. Tech Debt — Module Page Sentinel Guard and Metadata Backfill | 2/2 | Complete | {today's date} |
```

Update Phase 7 Plans section:
```
Plans:
- [x] 07-01-PLAN.md — TDD sentinel guard in generateModuleDocs + restore module pages + insert sentinels [Wave 1]
- [x] 07-02-PLAN.md — Rename requirements-completed to requirements_completed in 13 SUMMARY files [Wave 2]
```

**Step 3: Update 07-VALIDATION.md**

Set `nyquist_compliant: true` and `wave_0_complete: true` in frontmatter.
Update `status: complete` in frontmatter.
Check all task status rows to `green`.
Check all sign-off boxes.

**Step 4: Final round-trip verification**

Run the full verification suite:

```bash
# 1. Generator tests pass
cd scripts/generate_docs && go test -v -race ./...

# 2. No module pages modified by generate-docs
cd ../.. && make generate-docs
git status --short "docs/src/content/docs/commands/*/index.md" | grep "^.M" && echo "FAIL" || echo "PASS"

# 3. No hyphen variants in SUMMARY files
grep -r "^requirements-completed:" .planning/phases/ && echo "FAIL" || echo "PASS"

# 4. All 16 SUMMARYs have underscore variant
grep -r "^requirements_completed:" .planning/phases/*SUMMARY* | wc -l
# Expected: 16

# 5. Lint passes
make lint
```
  </action>
  <verify>
    <automated>grep -r "^requirements-completed:" .planning/phases/ && echo "FAIL" || echo "PASS: metadata clean" && cd scripts/generate_docs && go test -v -race ./... 2>&1 | tail -3</automated>
  </verify>
  <done>STATE.md reflects Phase 7 complete (7/7 phases, 18/18 plans). ROADMAP.md Phase 7 row shows Complete. 07-VALIDATION.md has nyquist_compliant: true. All verification checks pass: tests green, generate-docs clean round-trip, no hyphen variants in SUMMARY files.</done>
</task>

</tasks>

<verification>
1. `grep -r "^requirements-completed:" .planning/phases/` — expect NO output (zero hyphen variants)
2. `grep -r "^requirements_completed:" .planning/phases/*SUMMARY* | wc -l` — expect 16
3. `cd scripts/generate_docs && go test -v -race ./...` — all tests pass
4. `make generate-docs && git status --short "docs/src/content/docs/commands/*/index.md"` — expect NO output
5. `grep "completed_phases: 7" .planning/STATE.md` — confirms state updated
</verification>

<success_criteria>
- Zero instances of `requirements-completed:` (hyphen) in any SUMMARY file
- All 16 SUMMARY files consistently use `requirements_completed:` (underscore)
- STATE.md shows 7/7 phases complete, 18/18 plans complete
- ROADMAP.md Phase 7 row shows Complete with date
- 07-VALIDATION.md signed off with nyquist_compliant: true
- Full verification suite passes: tests, generate-docs, lint
</success_criteria>

<output>
After completion, create `.planning/phases/07-tech-debt-sentinel-guard-and-metadata-backfill/07-02-SUMMARY.md`
</output>
