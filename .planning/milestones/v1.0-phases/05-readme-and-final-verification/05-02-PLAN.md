---
phase: 05-readme-and-final-verification
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - README.md
autonomous: true
requirements: [VRFY-01, VRFY-02]

must_haves:
  truths:
    - "README project structure diagram does not reference cmd/ directory"
    - "README project structure includes migrations/ directory"
    - "README labels supabase/ as 'Supabase CLI configuration' not 'Database migrations'"
    - "README states Go 1.25+ (not 1.21)"
    - "README describes cache as Redis-only (no Ristretto mention)"
    - "README optional env var table contains only variables that exist in sample.env"
    - "README does not reference CACHE_TTL, CACHE_SIZE, WORKER_POOL_SIZE, QUERY_TIMEOUT, MAX_DB_POOL_SIZE"
    - "README uses HTTP_PORT instead of deprecated WEBHOOK_PORT"
  artifacts:
    - README.md (corrected project structure + env vars + feature descriptions)
  key_links:
    - "README env var table must match sample.env"
    - "README Go version must match go.mod"
    - "README project structure must match actual directory layout"
---

<objective>
Fix all stale claims in README.md: project structure diagram, Go version, cache stack description, environment variable table, and code documentation counts.

Purpose: The README is the first surface users see. It currently references a nonexistent `cmd/` directory, claims Go 1.21+ (actual: 1.25+), advertises a Ristretto cache layer that was removed, and lists 5+ environment variables that don't exist in the codebase.

Output: A README.md that accurately reflects the current project structure, dependencies, and configuration.
</objective>

<execution_context>
@/Users/divkix/.claude/get-shit-done/workflows/execute-plan.md
@/Users/divkix/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-readme-and-final-verification/05-RESEARCH.md

Key source files:
@README.md (the file being fixed)
@sample.env (source of truth for environment variables)
@go.mod (source of truth for Go version)

<interfaces>
From 05-RESEARCH.md — confirmed stale claims in README:

VRFY-01 (Project Structure, lines ~521-535):
- `cmd/` directory with `alita/` and `migrate/` subdirs: DOES NOT EXIST — remove entirely
- `supabase/` labeled "Database migrations": WRONG — correct label is "Supabase CLI configuration"
- `migrations/` directory: MISSING from diagram — must be added as "Database migration SQL files"

VRFY-02 (Feature descriptions + env vars):
- Go version (lines ~253, ~539): "Go 1.21 or higher" → "Go 1.25 or higher" (per go.mod)
- Cache stack (line ~85): "Dual-Layer Cache: Redis + Ristretto" → "Cache: Redis with TTL support"
- Env var `WEBHOOK_PORT` (optional vars table): deprecated → replace with `HTTP_PORT` (default 8080)
- Env vars `CACHE_TTL`, `CACHE_SIZE`, `WORKER_POOL_SIZE`, `QUERY_TIMEOUT`: NONEXISTENT — remove
- Env var `MAX_DB_POOL_SIZE`: NONEXISTENT — remove (correct vars are DB_MAX_OPEN_CONNS etc.)
- Code documentation claim (line ~507): "774+ functions across 83 Go files" — stale count
- Dev setup install link (line ~545): `go1.21.0.linux-amd64.tar.gz` → update to match 1.25+

From sample.env — actual optional variables to list in README:
- `HTTP_PORT` (default 8080) — unified server port
- `REDIS_PASSWORD` — Redis auth
- `ENABLED_LOCALES` — locale codes (default "en")
- `USE_WEBHOOKS` / `WEBHOOK_DOMAIN` / `WEBHOOK_SECRET` — webhook mode
- `DEBUG` — verbose logging
- `AUTO_MIGRATE` — auto-apply SQL migrations on startup
- `ENABLE_PPROF` — pprof endpoints (dev only)
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix README project structure diagram and Go version references</name>
  <files>README.md</files>
  <action>
Edit README.md with these specific changes:

**1. Project structure diagram (lines ~521-535):**
Replace the current diagram:
```
Alita_Robot/
├── alita/              # Core bot code
│   ├── config/         # Configuration management
│   ├── db/             # Database layer
│   ├── modules/        # Command handlers
│   ├── utils/          # Utility packages
│   └── i18n/           # Internationalization
├── cmd/                # Executables
│   ├── alita/          # Main bot
│   └── migrate/        # Migration tool
├── locales/            # Language files
├── supabase/           # Database migrations
└── docker/             # Docker configurations
```

With the corrected version:
```
Alita_Robot/
├── alita/              # Core bot code
│   ├── config/         # Configuration management
│   ├── db/             # Database layer
│   ├── modules/        # Command handlers
│   ├── utils/          # Utility packages
│   └── i18n/           # Internationalization
├── migrations/         # Database migration SQL files
├── locales/            # Language files
├── supabase/           # Supabase CLI configuration
├── docs/               # Documentation site (Astro/Starlight)
└── docker/             # Docker configurations
```

**2. Go version — ALL occurrences:**
- Line ~253 "Go 1.21 or higher" → "Go 1.25 or higher"
- Line ~539 "Install Go 1.21+" → "Install Go 1.25+"
- Line ~545 `go1.21.0.linux-amd64.tar.gz` → `go1.25.0.linux-amd64.tar.gz`

**3. Cache description (line ~85):**
Change `- **Dual-Layer Cache**: Redis + Ristretto for optimal performance`
To `- **Cache**: Redis with TTL support and stampede protection`

**4. Code documentation claim (line ~507):**
Change `All 774+ functions across 83 Go files are fully documented`
To `Comprehensive code documentation across the Go codebase`
(This removes the stale count that will go stale again. A generic claim is more durable.)
  </action>
  <verify>
    <automated>cd /Users/divkix/GitHub/Alita_Robot && grep -c "cmd/" README.md | grep "^0$" && grep -c "1\.21" README.md | grep "^0$" && grep -c "Ristretto" README.md | grep "^0$" && echo "PASS"</automated>
    Expected: PASS — no references to cmd/, Go 1.21, or Ristretto in README
  </verify>
  <done>README project structure has no cmd/ directory, shows migrations/ and corrected supabase/ label. All Go version references say 1.25+. Cache description is Redis-only.</done>
</task>

<task type="auto">
  <name>Task 2: Fix README optional environment variables table</name>
  <files>README.md</files>
  <action>
Replace the current optional variables table (lines ~314-327) which contains nonexistent variables:

**Current (stale):**
```markdown
| Variable           | Description                      | Default      |
| ------------------ | -------------------------------- | ------------ |
| `REDIS_PASSWORD`   | Redis password                   | (empty)      |
| `ENABLED_LOCALES`  | Comma-separated locale codes     | `en`         |
| `USE_WEBHOOKS`     | Enable webhook mode              | `false`      |
| `WEBHOOK_DOMAIN`   | Webhook domain (if enabled)      | -            |
| `WEBHOOK_SECRET`   | Webhook security token           | -            |
| `WEBHOOK_PORT`     | Webhook server port              | `8080`       |
| `MAX_DB_POOL_SIZE` | Database connection pool size    | (calculated) |
| `CACHE_TTL`        | Cache time-to-live (seconds)     | `300`        |
| `CACHE_SIZE`       | In-memory cache size (MB)        | `100`        |
| `WORKER_POOL_SIZE` | Concurrent worker pool size      | `10`         |
| `QUERY_TIMEOUT`    | Database query timeout (seconds) | `30`         |
```

**Replacement (accurate, sourced from sample.env):**
```markdown
| Variable           | Description                      | Default      |
| ------------------ | -------------------------------- | ------------ |
| `REDIS_PASSWORD`   | Redis password                   | (empty)      |
| `ENABLED_LOCALES`  | Comma-separated locale codes     | `en`         |
| `USE_WEBHOOKS`     | Enable webhook mode              | `false`      |
| `WEBHOOK_DOMAIN`   | Webhook domain (if enabled)      | -            |
| `WEBHOOK_SECRET`   | Webhook security token           | -            |
| `HTTP_PORT`        | Unified server port (health, metrics, webhook) | `8080` |
| `DEBUG`            | Enable verbose logging           | `false`      |
| `AUTO_MIGRATE`     | Auto-apply SQL migrations on startup | `false`  |
| `DROP_PENDING_UPDATES` | Drop pending updates on start | `true`      |
```

Add a note after the table: `See sample.env for the complete list of configuration options including database pool tuning, worker pool sizes, monitoring, and performance settings.`

This note already partially exists at line ~328 but should be updated to explicitly mention the categories of optional vars available.
  </action>
  <verify>
    <automated>cd /Users/divkix/GitHub/Alita_Robot && grep -c "CACHE_TTL\|CACHE_SIZE\|WORKER_POOL_SIZE\|QUERY_TIMEOUT\|MAX_DB_POOL_SIZE\|WEBHOOK_PORT" README.md | grep "^0$" && grep -c "HTTP_PORT" README.md | grep -v "^0$" && echo "PASS"</automated>
    Expected: PASS — no nonexistent vars remain, HTTP_PORT is present
  </verify>
  <done>README optional env var table lists only variables that exist in sample.env. CACHE_TTL, CACHE_SIZE, WORKER_POOL_SIZE, QUERY_TIMEOUT, MAX_DB_POOL_SIZE, and WEBHOOK_PORT are all removed. HTTP_PORT replaces WEBHOOK_PORT.</done>
</task>

</tasks>

<verification>
1. `grep -n "cmd/" README.md` — returns no matches
2. `grep -n "1\.21" README.md` — returns no matches
3. `grep -n "Ristretto" README.md` — returns no matches
4. `grep -n "CACHE_TTL\|CACHE_SIZE\|WORKER_POOL_SIZE\|QUERY_TIMEOUT\|MAX_DB_POOL_SIZE" README.md` — returns no matches
5. `grep -n "WEBHOOK_PORT" README.md` — returns no matches (deprecated var removed)
6. `grep -n "HTTP_PORT" README.md` — returns at least 1 match
7. `grep -n "migrations/" README.md` — returns at least 1 match (new directory in structure)
8. `grep -n "1\.25" README.md` — returns matches for Go version
</verification>

<success_criteria>
- README project structure diagram accurately reflects the actual directory layout (no cmd/, correct supabase/ label, migrations/ present)
- All Go version references updated to 1.25+
- Cache description says Redis-only (no Ristretto)
- Environment variable table contains only variables that exist in sample.env
- HTTP_PORT replaces deprecated WEBHOOK_PORT
</success_criteria>

<output>
After completion, create `.planning/phases/05-readme-and-final-verification/05-02-SUMMARY.md`
</output>
