---
phase: 05-readme-and-final-verification
plan: 03
type: execute
wave: 2
depends_on: [05-01, 05-02]
files_modified: []
autonomous: true
requirements: [VRFY-03, VRFY-04]

must_haves:
  truths:
    - "bun run build in docs/ completes with zero broken internal links"
    - "starlight-links-validator reports 'All internal links are valid'"
    - "make generate-docs output does not produce mangled env var names in api-reference/environment.md"
    - "No regressions in commands/ module pages from generate-docs run"
  artifacts: []
  key_links:
    - "starlight-links-validator is configured in docs/astro.config.mjs"
    - "make generate-docs uses the fixed camelToScreamingSnake from 05-01"
---

<objective>
Run final verification: confirm Astro docs build passes clean with starlight-links-validator (zero broken links), and verify make generate-docs output is consistent with committed manual fixes.

Purpose: This is the capstone verification for the entire 5-phase audit. It proves that all documentation surfaces — docs site, README, locale files, generated references — are correct and consistent.

Output: Verification evidence (build output confirming zero errors). No new files created — this plan only validates.
</objective>

<execution_context>
@/Users/divkix/.claude/get-shit-done/workflows/execute-plan.md
@/Users/divkix/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-readme-and-final-verification/05-RESEARCH.md

Depends on:
@.planning/phases/05-readme-and-final-verification/05-01-SUMMARY.md (camelToScreamingSnake fix)
@.planning/phases/05-readme-and-final-verification/05-02-SUMMARY.md (README fixes)

Key files:
@docs/astro.config.mjs (starlight-links-validator plugin configuration)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify Astro docs build passes with zero broken links</name>
  <files>(none — read-only verification)</files>
  <action>
Run the Astro docs build with link validation:

```bash
cd docs && bun run build 2>&1
```

Inspect the output for:
1. `starlight-links-validator` reporting "All internal links are valid" (or equivalent success message)
2. Build completing with "[build] Complete!" and a page count
3. No error lines containing "broken", "invalid", or "error"

If the build fails:
- Check the error output for which links are broken
- Cross-reference with pages created in Phases 2 and 4 (new module pages: devs, help, users; new operator pages: handler-groups, anonymous-admin, devs access tiers)
- Fix any broken links in the offending files
- Re-run the build to confirm clean

If the build passes (expected based on research): Record the output showing zero broken links and page count.

**IMPORTANT:** Do NOT skip this step even though research says it passes. The README fixes in 05-02 and the api-reference regeneration in 05-01 could have introduced new broken links.
  </action>
  <verify>
    <automated>cd /Users/divkix/GitHub/Alita_Robot/docs && bun run build 2>&1 | grep -E "All internal links are valid|Complete"</automated>
    Expected: Both "All internal links are valid" and "Complete!" appear in output
  </verify>
  <done>Astro build completes with zero broken internal links. starlight-links-validator confirms all links valid. Page count is reported.</done>
</task>

<task type="auto">
  <name>Task 2: Verify generate-docs output consistency with committed files</name>
  <files>(none — read-only verification, unless drift is found)</files>
  <action>
Run `make generate-docs` from the repo root, then check the diff against the committed state:

```bash
make generate-docs
git diff --stat docs/src/content/docs/api-reference/
git diff --stat docs/src/content/docs/commands/
```

**Expected results after 05-01 fix:**
1. `api-reference/*.md` files should show ZERO or minimal diff — the camelToScreamingSnake fix in 05-01 should have made the generated output match the committed manual fixes
2. `commands/{module}/index.md` files may show diffs because the generator produces generic descriptions while committed files have hand-curated content — this is acceptable and expected

**Acceptance criteria for VRFY-04:**
- `api-reference/environment.md` has no mangled env var names (no `_U_R_L`, `_D_B_`, `_M_S` patterns)
- `api-reference/database-schema.md`, `callbacks.md`, `commands.md`, `lock-types.md`, `permissions.md` show no regressions
- If `commands/` module pages have diffs, restore committed versions: `git checkout -- docs/src/content/docs/commands/`

**After verification:**
- If all api-reference files match: No action needed, verification passes
- If api-reference files have acceptable minor formatting diffs: Document them but do not commit — committed versions are canonical
- Restore any commands/ page regressions with git checkout

Record the verification results for the summary.
  </action>
  <verify>
    <automated>cd /Users/divkix/GitHub/Alita_Robot && make generate-docs && grep -c "DATABASE_U_R_L\|D_B_MAX\|TIMEOUT_M_S\|HTTP_P_O_R_T\|ENABLE_P_P_R_O_F" docs/src/content/docs/api-reference/environment.md | grep "^0$" && echo "PASS"</automated>
    Expected: PASS — no mangled env var names in generated output
  </verify>
  <done>make generate-docs produces output consistent with committed files. api-reference/ files have correct env var names. commands/ hand-edited pages are preserved. No regressions from the audit work.</done>
</task>

</tasks>

<verification>
1. `cd docs && bun run build` exits 0 with "All internal links are valid"
2. `make generate-docs` exits 0
3. `grep "DATABASE_U_R_L\|D_B_MAX\|TIMEOUT_M_S" docs/src/content/docs/api-reference/environment.md` returns no matches
4. `git diff --stat docs/src/content/docs/commands/` shows no unintended regressions (or regressions are restored)
5. All Phase 5 requirements (VRFY-01 through VRFY-04) are verified complete
</verification>

<success_criteria>
- Astro docs build: zero broken internal links, "All internal links are valid" confirmed
- generate-docs output: no mangled env var names, api-reference files consistent
- commands/ hand-edited pages: not regressed by generator
- All VRFY-01 through VRFY-04 requirements verified as complete
- The 5-phase documentation audit is fully verified and done
</success_criteria>

<output>
After completion, create `.planning/phases/05-readme-and-final-verification/05-03-SUMMARY.md`

This summary should include:
- Final verification results for all four VRFY requirements
- Overall audit summary: all 5 phases complete, all 25 requirements satisfied
- Any remaining known drift or acceptable deviations documented
</output>
